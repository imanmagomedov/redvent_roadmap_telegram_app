<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>RoadMap проекта автоматизации</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Comrades Devs Brand Colors */
            --cd-primary: #FF6B5A; /* Coral red from logo */
            --cd-secondary: #4A4FB7; /* Deep blue from logo */
            --cd-purple: #8B7DD8; /* Purple gradient from template */
            --cd-dark-navy: #2C3E86; /* Dark navy blue */
            --cd-light-coral: #FF9A8D; /* Lighter coral */
            --cd-gradient-primary: linear-gradient(135deg, #FF6B5A 0%, #4A4FB7 100%);
            --cd-gradient-secondary: linear-gradient(135deg, #8B7DD8 0%, #4A4FB7 100%);
            --cd-gradient-accent: linear-gradient(135deg, #FF9A8D 0%, #FF6B5A 100%);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.5;
            color: var(--tg-theme-text-color, #2C3E86);
            background: var(--tg-theme-bg-color, #ffffff);
            padding: 0;
            margin: 0;
            overflow-x: hidden;
        }

        .twa-header {
            background: var(--cd-gradient-primary);
            padding: 25px 15px;
            text-align: center;
            color: white;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(74, 79, 183, 0.2);
        }

        .twa-header h1 {
            font-size: 1.9rem;
            margin-bottom: 8px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .twa-header .subtitle {
            font-size: 0.9rem;
            opacity: 0.95;
            font-weight: 500;
        }

        .project-stats {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
            padding: 20px 15px;
            background: linear-gradient(135deg, #f8f9ff 0%, #fff5f4 100%);
        }

        .stat-item {
            text-align: center;
            padding: 16px 12px;
            background: var(--tg-theme-bg-color, white);
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(74, 79, 183, 0.08);
            border: 1px solid rgba(255, 107, 90, 0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .stat-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(74, 79, 183, 0.15);
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            background: var(--cd-gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 6px;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--cd-secondary);
            font-weight: 500;
        }

        .container {
            padding: 0 15px 25px;
        }

        .phase {
            background: var(--tg-theme-bg-color, white);
            margin: 20px 0;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 6px 25px rgba(74, 79, 183, 0.1);
            border: 1px solid rgba(255, 107, 90, 0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .phase:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 35px rgba(74, 79, 183, 0.15);
        }

        .phase-header {
            background: var(--cd-gradient-primary);
            padding: 20px;
            color: white;
            position: relative;
        }

        .phase-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 10px;
            line-height: 1.3;
            text-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .phase-period {
            font-size: 0.88rem;
            opacity: 0.95;
            margin-bottom: 6px;
            font-weight: 500;
        }

        .phase-goal {
            font-size: 0.82rem;
            opacity: 0.9;
            font-weight: 400;
        }

        .phase-duration {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.25);
            backdrop-filter: blur(10px);
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .meetings-container {
            padding: 20px;
        }

        .meeting-card {
            background: linear-gradient(135deg, #f8f9ff 0%, #fff8f7 100%);
            border-radius: 16px;
            padding: 18px;
            margin-bottom: 15px;
            position: relative;
            border-left: 5px solid var(--cd-primary);
            box-shadow: 0 3px 10px rgba(255, 107, 90, 0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .meeting-card:hover {
            transform: translateX(3px);
            box-shadow: 0 5px 15px rgba(255, 107, 90, 0.15);
        }

        .meeting-card:last-child {
            margin-bottom: 0;
        }

        .meeting-card.completed {
            background: linear-gradient(135deg, #e8f8e8 0%, #f0fff0 100%);
            border-left-color: #28a745;
        }

        .meeting-card.completed::after {
            content: '✓';
            position: absolute;
            top: 12px;
            right: 12px;
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3);
        }

        .meeting-title {
            font-size: 1.05rem;
            font-weight: 700;
            color: var(--cd-dark-navy);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .meeting-icon {
            width: 28px;
            height: 28px;
            background: var(--cd-gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.75rem;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(255, 107, 90, 0.3);
        }

        .meeting-card.completed .meeting-icon {
            background: linear-gradient(135deg, #28a745, #20c997);
            box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3);
        }

        .meeting-details {
            font-size: 0.88rem;
            margin-bottom: 12px;
            color: var(--cd-secondary);
            font-weight: 500;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .detail-label {
            font-weight: 600;
            color: var(--cd-dark-navy);
        }

        .meeting-goals {
            background: var(--tg-theme-bg-color, white);
            border-radius: 12px;
            padding: 14px;
            margin-top: 10px;
            border: 1px solid rgba(255, 107, 90, 0.1);
        }

        .goals-title {
            font-size: 0.82rem;
            font-weight: 700;
            color: var(--cd-secondary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.8px;
        }

        .goals-list {
            list-style: none;
            font-size: 0.82rem;
            color: var(--cd-dark-navy);
            font-weight: 500;
        }

        .goals-list li {
            padding: 3px 0 3px 16px;
            position: relative;
            line-height: 1.4;
        }

        .goals-list li::before {
            content: '•';
            position: absolute;
            left: 0;
            color: var(--cd-primary);
            font-weight: bold;
            font-size: 1.2rem;
        }

        .deliverables {
            background: var(--tg-theme-bg-color, white);
            margin: 25px 15px;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 6px 25px rgba(74, 79, 183, 0.1);
            border: 1px solid rgba(255, 107, 90, 0.1);
        }

        .deliverables h3 {
            font-size: 1.3rem;
            background: var(--cd-gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 700;
        }

        .deliverable-item {
            background: linear-gradient(135deg, #f8f9ff 0%, #fff8f7 100%);
            padding: 16px;
            border-radius: 14px;
            margin-bottom: 12px;
            border-left: 4px solid var(--cd-purple);
            box-shadow: 0 2px 8px rgba(139, 125, 216, 0.1);
            transition: transform 0.2s ease;
        }

        .deliverable-item:hover {
            transform: translateX(3px);
        }

        .deliverable-item:last-child {
            margin-bottom: 0;
        }

        .deliverable-title {
            font-weight: 700;
            color: var(--cd-dark-navy);
            margin-bottom: 6px;
            font-size: 0.95rem;
        }

        .deliverable-desc {
            color: var(--cd-secondary);
            font-size: 0.82rem;
            line-height: 1.5;
            font-weight: 500;
        }

        .highlight {
            background: var(--cd-gradient-accent);
            padding: 3px 8px;
            border-radius: 6px;
            font-weight: 700;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .twa-main-button {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--cd-gradient-primary);
            color: white;
            padding: 18px;
            text-align: center;
            font-weight: 700;
            font-size: 1.05rem;
            border: none;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 -4px 20px rgba(74, 79, 183, 0.2);
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.72rem;
            font-weight: 600;
            background: rgba(40, 167, 69, 0.15);
            color: #28a745;
            margin-left: 10px;
            border: 1px solid rgba(40, 167, 69, 0.2);
        }

        .telegram-specific {
            padding-bottom: 25px;
        }

        /* Comrades Devs specific enhancements */
        .comrades-brand-accent {
            position: relative;
            overflow: hidden;
        }

        .comrades-brand-accent::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: var(--cd-gradient-accent);
            opacity: 0.1;
            border-radius: 50%;
            transform: translate(30px, -30px);
        }

        @media (max-width: 480px) {
            .twa-header h1 {
                font-size: 1.6rem;
            }

            .phase-title {
                font-size: 1.05rem;
            }

            .project-stats {
                grid-template-columns: 1fr 1fr 1fr;
                gap: 10px;
                padding: 15px;
            }

            .stat-item {
                padding: 12px 8px;
            }

            .stat-value {
                font-size: 1rem;
            }

            .stat-label {
                font-size: 0.75rem;
            }
        }

        /* Additional brand elements */
        .phase-header.phase-1 {
            background: var(--cd-gradient-primary);
        }

        .phase-header.phase-2 {
            background: var(--cd-gradient-primary);
        }

        .phase-header.phase-3 {
            background: var(--cd-gradient-primary);
        }
    </style>
</head>
<body class="telegram-specific">
<div class="twa-header">
    <h1>🚀 RoadMap проекта</h1>
    <div class="subtitle">Система автоматизации производства</div>
</div>

<div class="project-stats">
    <div class="stat-item">
        <div class="stat-value">9 этапов</div>
        <div class="stat-label">Этапов</div>
    </div>
    <div class="stat-item">
        <div class="stat-value">255 дней</div>
        <div class="stat-label">Срок</div>
    </div>
    <div class="stat-item">
        <div class="stat-value">3 платформы</div>
        <div class="stat-label">Веб/Мобайл</div>
    </div>
</div>

<div class="container">
    <div class="phase">
        <div class="phase-header">
            <div class="phase-duration">3+ дня</div>
            <div class="phase-title">📋 Этап 0: Discovery Phase</div>
            <div class="phase-period">02 июня - 19 июля 2025</div>
            <div class="phase-goal">Анализ бизнес-процессов и сбор требований</div>
        </div>

        <div class="meetings-container">
            <div class="meeting-card completed">
                <div class="meeting-title">
                    <div class="meeting-icon">1</div>
                    Стратегическая сессия
                    <span class="status-badge">Выполнено</span>
                </div>
                <div class="meeting-details">
                    <div class="detail-row">
                        <span class="detail-label">Участники:</span>
                        <span>Руководство</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Время:</span>
                        <span>4 часа</span>
                    </div>
                </div>
                <div class="meeting-goals">
                    <div class="goals-title">Результаты:</div>
                    <ul class="goals-list">
                        <li>Обсуждены проблемные зоны бизнеса</li>
                        <li>Определены ключевые блоки для автоматизации</li>
                    </ul>
                </div>
            </div>

            <div class="meeting-card">
                <div class="meeting-title">
                    <div class="meeting-icon">2</div>
                    CustDev
                </div>
                <div class="meeting-details">
                    <div class="detail-row">
                        <span class="detail-label">Участники:</span>
                        <span>Сотрудники компании</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Время:</span>
                        <span>8 недель</span>
                    </div>
                </div>
                <div class="meeting-goals">
                    <div class="goals-title">Цели:</div>
                    <ul class="goals-list">
                        <li>Описать клиентский сегмент (описание специфических и поведенческих признаков)</li>
                        <li>Описать задачи/сложности (где сейчас сотрудники сталкиваются с трудностями, теряют время)</li>
                        <li>Получить инсайды, полученные в результате интервью, которые могут быть использованы для
                            измерения/улучшения/репозиционирования продукта</li>
                    </ul>
                </div>
            </div>

            <div class="meeting-card">
                <div class="meeting-title">
                    <div class="meeting-icon">3</div>
                    Операционные процессы
                </div>
                <div class="meeting-details">
                    <div class="detail-row">
                        <span class="detail-label">Участники:</span>
                        <span>Руководители отделов</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Время:</span>
                        <span>16 часов</span>
                    </div>
                </div>
                <div class="meeting-goals">
                    <div class="goals-title">Цели:</div>
                    <ul class="goals-list">
                        <li>Изучить процессы продаж (онлайн-встреча)</li>
                        <li>Проанализировать производство (на складе)</li>
                        <li>Разобрать логистику (онлайн-встреча + на складе)</li>
                    </ul>
                </div>
            </div>

            <div class="meeting-card">
                <div class="meeting-title">
                    <div class="meeting-icon">4</div>
                    Техническая сессия
                </div>
                <div class="meeting-details">
                    <div class="detail-row">
                        <span class="detail-label">Участники:</span>
                        <span>IT-команда</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Время:</span>
                        <span>2 часа</span>
                    </div>
                </div>
                <div class="meeting-goals">
                    <div class="goals-title">Цели:</div>
                    <ul class="goals-list">
                        <li>Анализ IT-инфраструктуры</li>
                        <li>Планирование интеграций</li>
                        <li>Требования к QR-системе</li>
                    </ul>
                </div>
            </div>

            <div class="meeting-card">
                <div class="meeting-title">
                    <div class="meeting-icon">5</div>
                    Дополнительные обсуждения
                </div>
                <div class="meeting-details">
                    <div class="detail-row">
                        <span class="detail-label">Участники:</span>
                        <span>Руководители отделов, менеджеры</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Время:</span>
                        <span>По согласованию</span>
                    </div>
                </div>
                <div class="meeting-goals">
                    <div class="goals-title">Цели:</div>
                    <ul class="goals-list">
                        <li>Проработка дополнительных вопросов</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="phase">
        <div class="phase-header">
            <div class="phase-duration">44 дня</div>
            <div class="phase-title">📝 Этап 1: Техническое задание</div>
            <div class="phase-period">2 июня - 1 августа 2025</div>
            <div class="phase-goal">Написание ТЗ, описание бизнес-процессов</div>
        </div>

        <div class="meetings-container">
            <div class="meeting-card">
                <div class="meeting-title">
                    <div class="meeting-icon">📋</div>
                    Приемка этапа 1
                </div>
                <div class="meeting-details">
                    <div class="detail-row">
                        <span class="detail-label">Дата:</span>
                        <span>1 августа 2025</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Время:</span>
                        <span>3 часа</span>
                    </div>
                </div>
                <div class="meeting-goals">
                    <div class="goals-title">Результаты:</div>
                    <ul class="goals-list">
                        <li>Полное техническое задание</li>
                        <li>Диаграммы бизнес-процессов</li>
                        <li>Архитектура системы</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="phase">
        <div class="phase-header">
            <div class="phase-duration">44 дня</div>
            <div class="phase-title">🏗️ Этап 2: Базовая система</div>
            <div class="phase-period">2 июля - 1 сентября 2025</div>
            <div class="phase-goal">Разработка базового функционала управления заказами</div>
        </div>

        <div class="meetings-container">
            <div class="meeting-card">
                <div class="meeting-title">
                    <div class="meeting-icon">🔗</div>
                    Интеграция с 1С и Bitrix
                </div>
                <div class="meeting-details">
                    <div class="detail-row">
                        <span class="detail-label">Дата:</span>
                        <span>15 августа 2025</span>
                    </div>
                </div>
                <div class="meeting-goals">
                    <div class="goals-title">Проверим:</div>
                    <ul class="goals-list">
                        <li>Интеграция с 1С</li>
                        <li>Интеграция с Bitrix</li>
                        <li>Синхронизация данных</li>
                    </ul>
                </div>
            </div>

            <div class="meeting-card">
                <div class="meeting-title">
                    <div class="meeting-icon">✅</div>
                    Приемка этапа 2
                </div>
                <div class="meeting-details">
                    <div class="detail-row">
                        <span class="detail-label">Дата:</span>
                        <span>1 сентября 2025</span>
                    </div>
                </div>
                <div class="meeting-goals">
                    <div class="goals-title">Демо:</div>
                    <ul class="goals-list">
                        <li>Система управления заказами</li>
                        <li>Каталогизация продуктов</li>
                        <li>Базовый расчет стоимости</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="phase">
        <div class="phase-header">
            <div class="phase-duration">65 дней</div>
            <div class="phase-title">📊 Этапы 3-5: Производство</div>
            <div class="phase-period">1 сентября - 2 декабря 2025</div>
            <div class="phase-goal"><span class="highlight">QR-система отслеживания</span> и автоматизация</div>
        </div>

        <div class="meetings-container">
            <div class="meeting-card">
                <div class="meeting-title">
                    <div class="meeting-icon">📱</div>
                    Пилот QR-системы
                </div>
                <div class="meeting-details">
                    <div class="detail-row">
                        <span class="detail-label">Дата:</span>
                        <span>15 октября 2025</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Место:</span>
                        <span>На производстве</span>
                    </div>
                </div>
                <div class="meeting-goals">
                    <div class="goals-title">Тест:</div>
                    <ul class="goals-list">
                        <li>QR-сканирование на участках</li>
                        <li>Мобильное приложение</li>
                        <li>Автообновление статусов</li>
                    </ul>
                </div>
            </div>

            <div class="meeting-card">
                <div class="meeting-title">
                    <div class="meeting-icon">🎯</div>
                    Приемка этапов 3-5
                </div>
                <div class="meeting-details">
                    <div class="detail-row">
                        <span class="detail-label">Дата:</span>
                        <span>2 декабря 2025</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Время:</span>
                        <span>4 часа</span>
                    </div>
                </div>
                <div class="meeting-goals">
                    <div class="goals-title">Демо:</div>
                    <ul class="goals-list">
                        <li>QR-система работает</li>
                        <li>Планирование производства</li>
                        <li>Система мотивации персонала</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="phase">
        <div class="phase-header">
            <div class="phase-duration">65 дней</div>
            <div class="phase-title">📊 Этапы 6-7: Интерфейсы</div>
            <div class="phase-period">19 октября 2025 - 6 января 2026</div>
            <div class="phase-goal">Веб-приложение и <span class="highlight">аналитические дашборды</span></div>
        </div>

        <div class="meetings-container">
            <div class="meeting-card">
                <div class="meeting-title">
                    <div class="meeting-icon">📈</div>
                    Настройка дашбордов
                </div>
                <div class="meeting-details">
                    <div class="detail-row">
                        <span class="detail-label">Дата:</span>
                        <span>15 декабря 2025</span>
                    </div>
                </div>
                <div class="meeting-goals">
                    <div class="goals-title">Настроим:</div>
                    <ul class="goals-list">
                        <li>Персональные дашборды</li>
                        <li>KPI для руководства</li>
                        <li>Производственная аналитика</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="phase">
        <div class="phase-header">
            <div class="phase-duration">78 дней</div>
            <div class="phase-title">🚀 Этапы 8-9: Внедрение</div>
            <div class="phase-period">2 декабря 2025 - 4 апреля 2026</div>
            <div class="phase-goal">Полное внедрение и <span class="highlight">обучение персонала</span></div>
        </div>

        <div class="meetings-container">
            <div class="meeting-card">
                <div class="meeting-title">
                    <div class="meeting-icon">🎓</div>
                    Программа обучения
                </div>
                <div class="meeting-details">
                    <div class="detail-row">
                        <span class="detail-label">Объем:</span>
                        <span>300 часов</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Период:</span>
                        <span>Январь-март 2026</span>
                    </div>
                </div>
                <div class="meeting-goals">
                    <div class="goals-title">Программа:</div>
                    <ul class="goals-list">
                        <li>Развертывание на производстве</li>
                        <li>Миграция данных</li>
                        <li>Обучение всех категорий</li>
                    </ul>
                </div>
            </div>

            <div class="meeting-card">
                <div class="meeting-title">
                    <div class="meeting-icon">✅</div>
                    Финальная приемка
                </div>
                <div class="meeting-details">
                    <div class="detail-row">
                        <span class="detail-label">Дата:</span>
                        <span>4 апреля 2026</span>
                    </div>
                </div>
                <div class="meeting-goals">
                    <div class="goals-title">Итог:</div>
                    <ul class="goals-list">
                        <li>Все функции работают</li>
                        <li>Персонал обучен</li>
                        <li>Подписание акта</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="deliverables">
    <h3>🎯 Ключевые результаты</h3>

    <div class="deliverable-item">
        <div class="deliverable-title">📱 QR-система отслеживания</div>
        <div class="deliverable-desc">Автоматическое обновление статусов заказов</div>
    </div>

    <div class="deliverable-item">
        <div class="deliverable-title">🏭 Планирование производства</div>
        <div class="deliverable-desc">Оптимизация загрузки оборудования</div>
    </div>

    <div class="deliverable-item">
        <div class="deliverable-title">💰 Система мотивации</div>
        <div class="deliverable-desc">Автоматический расчет сдельной оплаты</div>
    </div>

    <div class="deliverable-item">
        <div class="deliverable-title">📊 Аналитические дашборды</div>
        <div class="deliverable-desc">Real-time отчеты и аналитика</div>
    </div>

    <div class="deliverable-item">
        <div class="deliverable-title">🔄 Интеграции</div>
        <div class="deliverable-desc">Полная синхронизация с 1С и Bitrix24</div>
    </div>

    <div class="deliverable-item">
        <div class="deliverable-title">📚 Обучение персонала</div>
        <div class="deliverable-desc">300 часов обучения и документация</div>
    </div>
</div>

<script>
    // Telegram Web App Manager
    class TelegramWebAppManager {
        constructor() {
            this.tg = null;
            this.isReady = false;
            this.isInTelegram = false;
            this.init();
        }

        init() {
            // Проверяем, запущено ли приложение в Telegram
            this.isInTelegram = this.checkTelegramEnvironment();

            if (this.isInTelegram) {
                this.loadTelegramScript();
            } else {
                // Если не в Telegram, просто инициализируем fallback режим
                this.initFallbackMode();
                console.log('Приложение запущено вне Telegram');
            }
        }

        checkTelegramEnvironment() {
            // Проверяем различные признаки Telegram Web App
            return !!(
                window.Telegram ||
                window.TelegramWebviewProxy ||
                window.external?.notify ||
                /telegram/i.test(navigator.userAgent) ||
                window.location.search.includes('tgWebAppData') ||
                window.location.search.includes('tgWebAppStartParam')
            );
        }

        loadTelegramScript() {
            // Создаем script элемент для загрузки Telegram Web App API
            const script = document.createElement('script');
            script.src = 'https://telegram.org/js/telegram-web-app.js';
            script.async = true;

            script.onload = () => {
                this.onTelegramScriptLoaded();
            };

            script.onerror = () => {
                console.warn('Не удалось загрузить Telegram Web App script');
                this.initFallbackMode();
            };

            document.head.appendChild(script);
        }

        onTelegramScriptLoaded() {
            // Ждем инициализации Telegram объекта
            const checkTelegram = () => {
                if (window.Telegram?.WebApp) {
                    this.setupTelegramWebApp();
                } else {
                    setTimeout(checkTelegram, 50);
                }
            };
            checkTelegram();
        }

        setupTelegramWebApp() {
            try {
                this.tg = window.Telegram.WebApp;
                this.isReady = true;

                // Настраиваем Telegram Web App
                this.tg.ready();
                this.tg.expand();

                // Скрываем ненужные элементы
                this.tg.MainButton.hide();
                this.tg.BackButton.hide();

                // Настраиваем тему
                this.applyTelegramTheme();

                // Добавляем обработчики событий
                this.setupEventHandlers();

                // Отправляем уведомление о готовности
                this.tg.HapticFeedback.notificationOccurred('success');

                console.log('Telegram Web App инициализирован');
                console.log('Версия:', this.tg.version);
                console.log('Тема:', this.tg.colorScheme);

            } catch (error) {
                console.error('Ошибка при настройке Telegram Web App:', error);
                this.initFallbackMode();
            }
        }

        applyTelegramTheme() {
            if (!this.tg) return;

            const root = document.documentElement;

            // Применяем тему Telegram
            if (this.tg.colorScheme === 'dark') {
                root.style.setProperty('--tg-theme-bg-color', this.tg.themeParams.bg_color || '#1a1a1a');
                root.style.setProperty('--tg-theme-text-color', this.tg.themeParams.text_color || '#ffffff');
                root.style.setProperty('--tg-theme-secondary-bg-color', this.tg.themeParams.secondary_bg_color || '#2a2a2a');
            } else {
                root.style.setProperty('--tg-theme-bg-color', this.tg.themeParams.bg_color || '#ffffff');
                root.style.setProperty('--tg-theme-text-color', this.tg.themeParams.text_color || '#000000');
                root.style.setProperty('--tg-theme-secondary-bg-color', this.tg.themeParams.secondary_bg_color || '#f5f5f5');
            }
        }

        setupEventHandlers() {
            if (!this.tg) return;

            // Добавляем тактильную обратную связь
            document.addEventListener('click', (e) => {
                if (e.target.closest('.meeting-card')) {
                    this.tg.HapticFeedback.selectionChanged();
                }

                if (e.target.closest('.phase')) {
                    this.tg.HapticFeedback.impactOccurred('light');
                }
            });

            // Обработка изменения темы
            this.tg.onEvent('themeChanged', () => {
                this.applyTelegramTheme();
            });

            // Обработка изменения viewport
            this.tg.onEvent('viewportChanged', () => {
                // Можно добавить логику для адаптации под изменение размера
                console.log('Viewport изменен');
            });
        }

        initFallbackMode() {
            // Режим работы без Telegram Web App API
            console.log('Работаем в fallback режиме');

            // Добавляем базовые обработчики для улучшения UX
            document.addEventListener('click', (e) => {
                if (e.target.closest('.meeting-card')) {
                    // Простая анимация вместо тактильной обратной связи
                    const card = e.target.closest('.meeting-card');
                    card.style.transform = 'scale(0.98)';
                    setTimeout(() => {
                        card.style.transform = '';
                    }, 100);
                }
            });
        }
    }

    // Инициализируем Telegram Web App Manager при загрузке DOM
    document.addEventListener('DOMContentLoaded', () => {
        window.twaManager = new TelegramWebAppManager();
    });
</script>
</body>
</html>
